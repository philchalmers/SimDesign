<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Saving simulation results and state â€¢ SimDesign</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Saving simulation results and state">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SimDesign</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.18.7</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Catch_errors.html">Managing warning and error messages</a></li>
    <li><a class="dropdown-item" href="../articles/Fixed_obj_fun.html">Exporting objects and functions from the workspace</a></li>
    <li><a class="dropdown-item" href="../articles/HPC-computing.html">Distributing jobs for high-performance computing (HPC) clusters (e.g., via Slurm)</a></li>
    <li><a class="dropdown-item" href="../articles/MultipleAnalyses.html">Multiple analysis functions</a></li>
    <li><a class="dropdown-item" href="../articles/Parallel-computing.html">Parallel computing information</a></li>
    <li><a class="dropdown-item" href="../articles/Saving-results.html">Saving simulation results and state</a></li>
    <li><a class="dropdown-item" href="../articles/SimDesign-intro.html">Introduction to the SimDesign package</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/philchalmers/SimDesign/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Saving simulation results and state</h1>
                        <h4 data-toc-skip class="author">Phil
Chalmers</h4>
            
            <h4 data-toc-skip class="date">2025-03-09</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/philchalmers/SimDesign/blob/main/vignettes/Saving-results.Rmd" class="external-link"><code>vignettes/Saving-results.Rmd</code></a></small>
      <div class="d-none name"><code>Saving-results.Rmd</code></div>
    </div>

    
    
<p>Unsurprisingly, you may want to save your results to your hard disk
in case of power outages or random system crashes to allow restarting at
the interrupted location, save more complete versions of the analysis
results in case you want to inspect the complete simulation results at a
later time, store/restore the R seeds for debugging and replication
purposes, and so on. This document demonstrates various ways in which
<code>SimDesign</code> saves output to hard disks.</p>
<p>As usual, define the functions of interest.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://philchalmers.github.io/SimDesign/">SimDesign</a></span><span class="op">)</span></span>
<span><span class="co"># SimFunctions()</span></span>
<span></span>
<span><span class="va">Design</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/createDesign.html">createDesign</a></span><span class="op">(</span>N <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">20</span>,<span class="fl">30</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Generate</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">condition</span>, <span class="va">fixed_objects</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">condition</span><span class="op">$</span><span class="va">N</span><span class="op">)</span>    </span>
<span>    <span class="va">dat</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">Analyse</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">condition</span>, <span class="va">dat</span>, <span class="va">fixed_objects</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">ret</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>p <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/t.test.html" class="external-link">t.test</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span><span class="op">$</span><span class="va">p.value</span><span class="op">)</span></span>
<span>    <span class="va">ret</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">Summarise</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">condition</span>, <span class="va">results</span>, <span class="va">fixed_objects</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">ret</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/EDR.html">EDR</a></span><span class="op">(</span><span class="va">results</span>, alpha <span class="op">=</span> <span class="fl">.05</span><span class="op">)</span></span>
<span>    <span class="va">ret</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>This is a very simple simulation that takes very little time to
complete, however it will be used to show the basic saving concepts
supported in <code>SimDesign</code>. Note that more detailed information
is located in the <code>runSimulation</code> documentation.</p>
<div class="section level2">
<h2 id="option-save-true-default-is-true">Option: <code>save = TRUE</code> (Default is <code>TRUE</code>)<a class="anchor" aria-label="anchor" href="#option-save-true-default-is-true"></a>
</h2>
<p>The <code>save</code> flag triggers whether temporary results should
be saved to the hard-disk in case of power outages and crashes. When
this flag is used results can easily be restored automatically and the
simulation can continue where it left off after the hardware problems
have been dealt with. In fact, no modifications in the code required
because <code><a href="../reference/runSimulation.html">runSimulation()</a></code> will automatically detect temporary
files to resume from (so long as they are resumed from the same computer
node; otherwise, see the <code>save_details</code> list).</p>
<p>As a simple example, say that in the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mn>30</mn></mrow><annotation encoding="application/x-tex">N=30</annotation></semantics></math>
condition something went terribly wrong and the simulation crashed.
However, the first two design conditions are perfectly fine. The
<code>save</code> flag is very helpful here because the state is not
lost and the results are still useful. Finally, supplying a
<code>filename</code> argument will safely save the aggregate simulation
results to the hard-drive for future reference; however, this wonâ€™t be
called until the simulation is complete.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Analyse</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">condition</span>, <span class="va">dat</span>, <span class="va">fixed_objects</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw">if</span><span class="op">(</span><span class="va">condition</span><span class="op">$</span><span class="va">N</span> <span class="op">==</span> <span class="fl">30</span><span class="op">)</span> <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">'Danger Will Robinson!'</span><span class="op">)</span></span>
<span>    <span class="va">ret</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>p <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/t.test.html" class="external-link">t.test</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span><span class="op">$</span><span class="va">p.value</span><span class="op">)</span></span>
<span>    <span class="va">ret</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/runSimulation.html">runSimulation</a></span><span class="op">(</span><span class="va">Design</span>, replications <span class="op">=</span> <span class="fl">1000</span>, save<span class="op">=</span><span class="cn">TRUE</span>, filename<span class="op">=</span><span class="st">'my-simple-sim'</span>,</span>
<span>                     generate<span class="op">=</span><span class="va">Generate</span>, analyse<span class="op">=</span><span class="va">Analyse</span>, summarise<span class="op">=</span><span class="va">Summarise</span>,</span>
<span>                     control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>stop_on_fatal <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Design: 1/3;   Replications: 1000;   RAM Used: 67.9 Mb;   Total Time: 0.00s </span></span>
<span><span class="co">##  Conditions: N=10</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Design: 2/3;   Replications: 1000;   RAM Used: 68.9 Mb;   Total Time: 0.18s </span></span>
<span><span class="co">##  Conditions: N=20</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Design: 3/3;   Replications: 1000;   RAM Used: 68.9 Mb;   Total Time: 0.35s </span></span>
<span><span class="co">##  Conditions: N=30</span></span>
<span><span class="co">## </span></span></code></pre>
<p>Check that temporary file still exists.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">dir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">files</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">'SIMDESIGN'</span>, <span class="va">files</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "SIMDESIGN-TEMPFILE_fv-az1719-655.rds"</span></span></code></pre>
<p>Notice here that the simulation stopped at 67% because the third
design condition threw too many consecutive errors (this is a built-in
fail-safe in <code>SimDesign</code>). To imitate a type of crash/power
outage, <code>control = list(stop_on_fatal = TRUE)</code> input;
otherwise, the simulation would continue normally over these terminal
conditions though place <code>NA</code> placeholders for the terminal
condition.</p>
<p>After we fix this portion of the code the simulation can be restarted
at the previous state and continue on as normal. Therefore, in the event
of unforeseen program execution crashes no time is lost.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Analyse</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">condition</span>, <span class="va">dat</span>, <span class="va">fixed_objects</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">ret</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>p <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/t.test.html" class="external-link">t.test</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span><span class="op">$</span><span class="va">p.value</span><span class="op">)</span></span>
<span>    <span class="va">ret</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/runSimulation.html">runSimulation</a></span><span class="op">(</span><span class="va">Design</span>, replications <span class="op">=</span> <span class="fl">1000</span>, save<span class="op">=</span><span class="cn">TRUE</span>, filename<span class="op">=</span><span class="st">'my-simple-sim'</span>,</span>
<span>                     generate<span class="op">=</span><span class="va">Generate</span>, analyse<span class="op">=</span><span class="va">Analyse</span>, summarise<span class="op">=</span><span class="va">Summarise</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Design: 3/3;   Replications: 1000   Total Time: 0.35s </span></span>
<span><span class="co">##  Conditions: N=30</span></span>
<span><span class="co">## </span></span></code></pre>
<p>Check which files exist.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">dir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">files</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">'SIMDESIGN'</span>, <span class="va">files</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">## character(0)</span></span></code></pre>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">files</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">'my-simp'</span>, <span class="va">files</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "my-simple-sim.rds"</span></span></code></pre>
<p>Notice that when complete, the temporary file is removed from the
hard-drive.</p>
<p>Relatedly, the <code>.Random.seed</code> states for each successful
replication can be saved by passing
<code>control = list(store_Random.seeds = TRUE))</code> to , though
these are generally only useful under exceptional circumstances (e.g.,
when the generate-analyse results are unusual but did not throw a
warning or error message, yet should be inspected interactively).</p>
</div>
<div class="section level2">
<h2 id="store_results-true-by-default-though-not-recommended-if-ram-is-suspected-to-be-an-issue">
<code>store_results</code> (<code>TRUE</code> by default, though not
recommended if RAM is suspected to be an issue)<a class="anchor" aria-label="anchor" href="#store_results-true-by-default-though-not-recommended-if-ram-is-suspected-to-be-an-issue"></a>
</h2>
<p>Passing <code>store_results = TRUE</code> stores the
<code>results</code> object information that are passed to
<code><a href="../reference/Summarise.html">Summarise()</a></code> in the returned object. This allows for further
inspection of the simulation results, and potential to use functions
such as <code><a href="../reference/reSummarise.html">reSummarise()</a></code> to provide meta-summaries of the
simulation at a later time. After the simulation is complete, these
results can be extracted using <code>SimResults(res)</code> (or more
generally with <code>SimExtract(res, what = 'results')</code>). For
example,</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># store_results=TRUE by default</span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/runSimulation.html">runSimulation</a></span><span class="op">(</span><span class="va">Design</span>, replications <span class="op">=</span> <span class="fl">3</span>, </span>
<span>              generate<span class="op">=</span><span class="va">Generate</span>, analyse<span class="op">=</span><span class="va">Analyse</span>, summarise<span class="op">=</span><span class="va">Summarise</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Design: 1/3;   Replications: 3;   RAM Used: 69.6 Mb;   Total Time: 0.00s </span></span>
<span><span class="co">##  Conditions: N=10</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Design: 2/3;   Replications: 3;   RAM Used: 69.6 Mb;   Total Time: 0.00s </span></span>
<span><span class="co">##  Conditions: N=20</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Design: 3/3;   Replications: 3;   RAM Used: 69.6 Mb;   Total Time: 0.01s </span></span>
<span><span class="co">##  Conditions: N=30</span></span>
<span><span class="co">## </span></span></code></pre>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/SimResults.html">SimResults</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span>
<span><span class="va">results</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 9 Ã— 2</span></span></span>
<span><span class="co">##       N     p</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>    10 0.363</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>    10 0.816</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>    10 0.555</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span>    20 0.674</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span>    20 0.481</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">6</span>    20 0.120</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">7</span>    30 0.664</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">8</span>    30 0.527</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">9</span>    30 0.848</span></span></code></pre>
<p>Note that this should be used if the number of
replications/<code>design</code> conditions is small enough to warrant
such storage; otherwise, the R session may run out of memory (RAM) as
the simulation progresses. Otherwise, <code>save_results = TRUE</code>
described below is the recommended approach to resolve potential memory
issues.</p>
</div>
<div class="section level2">
<h2 id="option-save_results-true-false-by-default-recommended-during-official-simulation-run-if-ram-is-an-issue">Option: <code>save_results = TRUE</code> (<code>FALSE</code> by
default; recommended during official simulation run if RAM is an
issue)<a class="anchor" aria-label="anchor" href="#option-save_results-true-false-by-default-recommended-during-official-simulation-run-if-ram-is-an-issue"></a>
</h2>
<p>Finally, the <code>save_results</code> argument will output the
<code>results</code> elements that were passed to
<code><a href="../reference/Summarise.html">Summarise()</a></code> to separate <code>.rds</code> files containing
all the analysis results and <code>condition</code> information. This
option is supported primarily for simulations that are anticipated to
have memory storage issues, where the results are written to the
hard-drive and released from memory. Note that when using
<code>save_results</code> the <code>save</code> flag is automatically
set to <code>TRUE</code> to ensure that the simulation state is
correctly tracked.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/runSimulation.html">runSimulation</a></span><span class="op">(</span><span class="va">Design</span>, replications <span class="op">=</span> <span class="fl">1000</span>, save_results<span class="op">=</span><span class="cn">TRUE</span>,</span>
<span>                     generate<span class="op">=</span><span class="va">Generate</span>, analyse<span class="op">=</span><span class="va">Analyse</span>, summarise<span class="op">=</span><span class="va">Summarise</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Design: 1/3;   Replications: 1000;   RAM Used: 71.9 Mb;   Total Time: 0.00s </span></span>
<span><span class="co">##  Conditions: N=10</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Design: 2/3;   Replications: 1000;   RAM Used: 71.9 Mb;   Total Time: 0.17s </span></span>
<span><span class="co">##  Conditions: N=20</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Design: 3/3;   Replications: 1000;   RAM Used: 71.9 Mb;   Total Time: 0.34s </span></span>
<span><span class="co">##  Conditions: N=30</span></span>
<span><span class="co">## </span></span></code></pre>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">dir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">directory</span> <span class="op">&lt;-</span> <span class="va">dir</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">'SimDesign-results'</span>, <span class="va">dir</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">dir</a></span><span class="op">(</span><span class="va">directory</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "results-row-1.rds" "results-row-2.rds" "results-row-3.rds"</span></span></code></pre>
<p>Here we can see that three <code>.rds</code> files have been saved to
the folder with the computer node name and a prefixed
<code>'SimDesign-results'</code> character string. Each
<code>.rds</code> file contains the respective simulation results
(including errors and warnings), which can be read in directly with
<code><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS()</a></code>:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">row1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">directory</span>, <span class="st">'/results-row-1.rds'</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">row1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## List of 6</span></span>
<span><span class="co">##  $ condition    : tibble [1 Ã— 1] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">##   ..$ N: num 10</span></span>
<span><span class="co">##  $ results      :'data.frame':   1000 obs. of  1 variable:</span></span>
<span><span class="co">##   ..$ p: num [1:1000] 0.976 0.397 0.143 0.595 0.453 ...</span></span>
<span><span class="co">##  $ errors       : 'table' int[0 (1d)] </span></span>
<span><span class="co">##   ..- attr(*, "dimnames")=List of 1</span></span>
<span><span class="co">##   .. ..$ : NULL</span></span>
<span><span class="co">##  $ error_seeds  : NULL</span></span>
<span><span class="co">##  $ warnings     : 'table' int[0 (1d)] </span></span>
<span><span class="co">##   ..- attr(*, "dimnames")=List of 1</span></span>
<span><span class="co">##   .. ..$ warnings: NULL</span></span>
<span><span class="co">##  $ warning_seeds: NULL</span></span></code></pre>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">row1</span><span class="op">$</span><span class="va">condition</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 1 Ã— 1</span></span></span>
<span><span class="co">##       N</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>    10</span></span></code></pre>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">row1</span><span class="op">$</span><span class="va">results</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##        p</span></span>
<span><span class="co">## 1 0.9759</span></span>
<span><span class="co">## 2 0.3974</span></span>
<span><span class="co">## 3 0.1430</span></span>
<span><span class="co">## 4 0.5947</span></span>
<span><span class="co">## 5 0.4534</span></span>
<span><span class="co">## 6 0.2007</span></span></code></pre>
<p>or, equivalently, with the <code><a href="../reference/SimResults.html">SimResults()</a></code> function</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># first row</span></span>
<span><span class="va">row1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/SimResults.html">SimResults</a></span><span class="op">(</span><span class="va">res</span>, which <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">row1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## tibble [1,000 Ã— 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">##  $ N: num [1:1000] 10 10 10 10 10 10 10 10 10 10 ...</span></span>
<span><span class="co">##  $ p: num [1:1000] 0.976 0.397 0.143 0.595 0.453 ...</span></span></code></pre>
<p>The <code><a href="../reference/SimResults.html">SimResults()</a></code> function has the added benefit that it
can read-in all simulation results at once (only recommended if RAM can
hold all the information), or simply hand pick which ones should be
inspected. For example, here is how all the saved results can be
inspected:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">input</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/SimResults.html">SimResults</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">input</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## tibble [3,000 Ã— 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">##  $ N: num [1:3000] 10 10 10 10 10 10 10 10 10 10 ...</span></span>
<span><span class="co">##  $ p: num [1:3000] 0.976 0.397 0.143 0.595 0.453 ...</span></span></code></pre>
<p>Should the need arise to remove the results directory then the
<code><a href="../reference/SimClean.html">SimClean()</a></code> function is the easiest way to remove all
unwanted files and directories.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/SimClean.html">SimClean</a></span><span class="op">(</span>results <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="recommendations">Recommendations<a class="anchor" aria-label="anchor" href="#recommendations"></a>
</h2>
<p>My general recommendation when running simulations is to supply a
<code>filename = 'some_simulation_name'</code> when your simulation is
finally ready for run time (particularly for simulations which take a
long time to finish), and to leave the default <code>save = TRUE</code>
and <code>store_results = TRUE</code> to track any temporary files in
the event of unexpected crashes and to store the <code>results</code>
objects for future inspection (should the need arise). As the
aggregation of the simulation results is often what you are interested
in then this approach will ensure that the results are stored in a
succinct manner for later analyses. However, if RAM is suspected to be
an issue as the simulation progresses then using
<code>save_results = TRUE</code> is strongly recommended to avoid
memory-based storage issues.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Phil Chalmers.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
