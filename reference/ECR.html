<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Compute empirical coverage rates — ECR • SimDesign</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Compute empirical coverage rates — ECR"><meta name="description" content="Computes the detection rate for determining empirical coverage rates given a set of estimated
confidence intervals. Note that using 1 - ECR(CIs, parameter) will provide the empirical
detection rate. Also supports computing the average width of the CIs, which may be useful when comparing
the efficiency of CI estimators."><meta property="og:description" content="Computes the detection rate for determining empirical coverage rates given a set of estimated
confidence intervals. Note that using 1 - ECR(CIs, parameter) will provide the empirical
detection rate. Also supports computing the average width of the CIs, which may be useful when comparing
the efficiency of CI estimators."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SimDesign</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.17.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Catch_errors.html">Managing warning and error messages</a></li>
    <li><a class="dropdown-item" href="../articles/Fixed_obj_fun.html">Exporting objects and functions from the workspace</a></li>
    <li><a class="dropdown-item" href="../articles/HPC-computing.html">Distributing jobs for high-performance computing (HPC) clusters (e.g., via Slurm)</a></li>
    <li><a class="dropdown-item" href="../articles/MultipleAnalyses.html">Multiple analysis functions</a></li>
    <li><a class="dropdown-item" href="../articles/Parallel-computing.html">Parallel computing information</a></li>
    <li><a class="dropdown-item" href="../articles/Saving-results.html">Saving simulation results and state</a></li>
    <li><a class="dropdown-item" href="../articles/SimDesign-intro.html">Introduction to the SimDesign package</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/philchalmers/SimDesign/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Compute empirical coverage rates</h1>
      <small class="dont-index">Source: <a href="https://github.com/philchalmers/SimDesign/blob/main/R/summary_functions.R" class="external-link"><code>R/summary_functions.R</code></a></small>
      <div class="d-none name"><code>ECR.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Computes the detection rate for determining empirical coverage rates given a set of estimated
confidence intervals. Note that using <code>1 - ECR(CIs, parameter)</code> will provide the empirical
detection rate. Also supports computing the average width of the CIs, which may be useful when comparing
the efficiency of CI estimators.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ECR</span><span class="op">(</span></span>
<span>  <span class="va">CIs</span>,</span>
<span>  <span class="va">parameter</span>,</span>
<span>  tails <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  CI_width <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  complement <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  names <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  unname <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-cis">CIs<a class="anchor" aria-label="anchor" href="#arg-cis"></a></dt>
<dd><p>a <code>numeric</code> vector or <code>matrix</code> of confidence interval values for a
given parameter value, where the first element/column indicates the lower confidence interval
and the second element/column the upper confidence interval. If a
vector of length 2 is passed instead then the returned value will be either a 1 or 0 to indicate
whether the parameter value was or was not within the interval, respectively. Otherwise,
the input must be a matrix with an even number of columns</p></dd>


<dt id="arg-parameter">parameter<a class="anchor" aria-label="anchor" href="#arg-parameter"></a></dt>
<dd><p>a numeric scalar indicating the fixed parameter value. Alternative, a <code>numeric</code>
vector object with length equal to the number of rows as <code>CIs</code> (use to compare sets of parameters
at once)</p></dd>


<dt id="arg-tails">tails<a class="anchor" aria-label="anchor" href="#arg-tails"></a></dt>
<dd><p>logical; when TRUE returns a vector of length 2 to indicate the proportion of times
the parameter was lower or higher than the supplied interval, respectively. This is mainly only
useful when the coverage region is not expected to be symmetric, and therefore is generally not
required. Note that <code>1 - sum(ECR(CIs, parameter, tails=TRUE)) == ECR(CIs, parameter)</code></p></dd>


<dt id="arg-ci-width">CI_width<a class="anchor" aria-label="anchor" href="#arg-ci-width"></a></dt>
<dd><p>logical; rather than returning the overall coverage rate, return the
average width of the CIs instead? Useful when comparing the efficiency of different CI
estimators</p></dd>


<dt id="arg-complement">complement<a class="anchor" aria-label="anchor" href="#arg-complement"></a></dt>
<dd><p>logical; rather than computing the proportion of
population parameters within the CI, return the proportion outside the
advertised CI (1 - ECR = alpha). In the case where only one value is provided,
which normally would return a 0 if outside the CI or 1 if inside, the values
will be switched (useful when using, for example, CI tests of for the significance
of parameters)</p></dd>


<dt id="arg-names">names<a class="anchor" aria-label="anchor" href="#arg-names"></a></dt>
<dd><p>an optional character vector used to name the returned object. Generally useful
when more than one CI estimate is investigated at once</p></dd>


<dt id="arg-unname">unname<a class="anchor" aria-label="anchor" href="#arg-unname"></a></dt>
<dd><p>logical; apply <code><a href="https://rdrr.io/r/base/unname.html" class="external-link">unname</a></code> to the results to remove any variable
names?</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Chalmers, R. P., &amp; Adkins, M. C.  (2020). Writing Effective and Reliable Monte Carlo Simulations
with the SimDesign Package. <code>The Quantitative Methods for Psychology, 16</code>(4), 248-280.
<a href="https://doi.org/10.20982/tqmp.16.4.p248" class="external-link">doi:10.20982/tqmp.16.4.p248</a></p>
<p>Sigal, M. J., &amp; Chalmers, R. P. (2016). Play it again: Teaching statistics with Monte
Carlo simulation. <code>Journal of Statistics Education, 24</code>(3), 136-156.
<a href="https://doi.org/10.1080/10691898.2016.1246953" class="external-link">doi:10.1080/10691898.2016.1246953</a></p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="EDR.html">EDR</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Phil Chalmers <a href="mailto:rphilip.chalmers@gmail.com">rphilip.chalmers@gmail.com</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">CIs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">100</span>, <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>   <span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span>   <span class="va">CIs</span><span class="op">[</span><span class="va">i</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/t.test.html" class="external-link">t.test</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span><span class="op">$</span><span class="va">conf.int</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">ECR</span><span class="op">(</span><span class="va">CIs</span>, <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.92</span>
<span class="r-in"><span><span class="fu">ECR</span><span class="op">(</span><span class="va">CIs</span>, <span class="fl">0</span>, tails <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.03 0.05</span>
<span class="r-in"><span><span class="fu">ECR</span><span class="op">(</span><span class="va">CIs</span>, <span class="fl">0</span>, complement <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># proportion outside interval</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.08</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># single vector input</span></span></span>
<span class="r-in"><span><span class="va">CI</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">ECR</span><span class="op">(</span><span class="va">CI</span>, <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-in"><span><span class="fu">ECR</span><span class="op">(</span><span class="va">CI</span>, <span class="fl">0</span>, complement <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0</span>
<span class="r-in"><span><span class="fu">ECR</span><span class="op">(</span><span class="va">CI</span>, <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0</span>
<span class="r-in"><span><span class="fu">ECR</span><span class="op">(</span><span class="va">CI</span>, <span class="fl">2</span>, complement <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-in"><span><span class="fu">ECR</span><span class="op">(</span><span class="va">CI</span>, <span class="fl">2</span>, tails <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0 1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># parameters of the same size as CI</span></span></span>
<span class="r-in"><span><span class="va">parameters</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span></span></span>
<span class="r-in"><span><span class="va">CIs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">parameters</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>, <span class="va">parameters</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">parameters</span> <span class="op">&lt;-</span> <span class="va">parameters</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">ECR</span><span class="op">(</span><span class="va">CIs</span>, <span class="va">parameters</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.6</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># average width of CIs</span></span></span>
<span class="r-in"><span><span class="fu">ECR</span><span class="op">(</span><span class="va">CIs</span>, <span class="va">parameters</span>, CI_width<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1.107228</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ECR() for multiple CI estimates in the same object</span></span></span>
<span class="r-in"><span><span class="va">parameter</span> <span class="op">&lt;-</span> <span class="fl">10</span></span></span>
<span class="r-in"><span><span class="va">CIs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>lowerCI_1<span class="op">=</span><span class="va">parameter</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  upperCI_1<span class="op">=</span><span class="va">parameter</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  lowerCI_2<span class="op">=</span><span class="va">parameter</span> <span class="op">-</span> <span class="fl">2</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  upperCI_2<span class="op">=</span><span class="va">parameter</span> <span class="op">+</span> <span class="fl">2</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">CIs</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   lowerCI_1 upperCI_1 lowerCI_2 upperCI_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  9.868010  10.95595  8.056701  11.70004</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  9.540787  10.46340  9.198803  10.49114</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  9.990340  10.39441  8.744864  11.23700</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  9.095354  10.05217  9.778473  10.56988</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  9.670788  10.71086  9.079359  11.79476</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  9.392610  10.17076  8.889488  11.87073</span>
<span class="r-in"><span><span class="fu">ECR</span><span class="op">(</span><span class="va">CIs</span>, <span class="va">parameter</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 1</span>
<span class="r-in"><span><span class="fu">ECR</span><span class="op">(</span><span class="va">CIs</span>, <span class="va">parameter</span>, tails<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0 0 0 0</span>
<span class="r-in"><span><span class="fu">ECR</span><span class="op">(</span><span class="va">CIs</span>, <span class="va">parameter</span>, CI_width<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.8840042 1.9404326</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># often a good idea to provide names for the output</span></span></span>
<span class="r-in"><span><span class="fu">ECR</span><span class="op">(</span><span class="va">CIs</span>, <span class="va">parameter</span>, names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'this'</span>, <span class="st">'that'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> this that </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    1    1 </span>
<span class="r-in"><span><span class="fu">ECR</span><span class="op">(</span><span class="va">CIs</span>, <span class="va">parameter</span>, CI_width<span class="op">=</span><span class="cn">TRUE</span>, names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'this'</span>, <span class="st">'that'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      this      that </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.8840042 1.9404326 </span>
<span class="r-in"><span><span class="fu">ECR</span><span class="op">(</span><span class="va">CIs</span>, <span class="va">parameter</span>, tails<span class="op">=</span><span class="cn">TRUE</span>, names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'this'</span>, <span class="st">'that'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> this_lower this_upper that_lower that_upper </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          0          0          0          0 </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Phil Chalmers.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

