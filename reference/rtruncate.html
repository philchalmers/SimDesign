<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Generate a random set of values within a truncated range — rtruncate • SimDesign</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Generate a random set of values within a truncated range — rtruncate"><meta property="og:description" content="Function generates data given a supplied random number generating function that
are constructed to fall within a particular range. Sampled values outside this
range are discarded and re-sampled until the desired criteria has been met."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar- navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">SimDesign</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.20</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Catch_errors.html">Managing warning and error messages</a>
    </li>
    <li>
      <a href="../articles/Fixed_obj_fun.html">Exporting objects and functions from the workspace</a>
    </li>
    <li>
      <a href="../articles/HPC-computing.html">Distributing jobs for high-performance computing (HPC) clusters (e.g., via Slurm)</a>
    </li>
    <li>
      <a href="../articles/MultipleAnalyses.html">Multiple analysis functions</a>
    </li>
    <li>
      <a href="../articles/Parallel-computing.html">Parallel computing information</a>
    </li>
    <li>
      <a href="../articles/Saving-results.html">Saving simulation results and state</a>
    </li>
    <li>
      <a href="../articles/SimDesign-intro.html">Introduction to the SimDesign package</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/philchalmers/SimDesign/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-sun"></span>


    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="dropdown-header">Light</li>
    <li class="dropdown-header">Dark</li>
    <li class="dropdown-header">Auto</li>
  </ul></li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generate a random set of values within a truncated range</h1>
    <small class="dont-index">Source: <a href="https://github.com/philchalmers/SimDesign/blob/main/R/rtruncate.R" class="external-link"><code>R/rtruncate.R</code></a></small>
    <div class="hidden name"><code>rtruncate.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Function generates data given a supplied random number generating function that
are constructed to fall within a particular range. Sampled values outside this
range are discarded and re-sampled until the desired criteria has been met.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">rtruncate</span><span class="op">(</span><span class="va">n</span>, <span class="va">rfun</span>, <span class="va">range</span>, <span class="va">...</span>, redraws <span class="op">=</span> <span class="fl">100L</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>number of observations to generate. This should be the first argument
passed to <code>rfun</code></p></dd>


<dt id="arg-rfun">rfun<a class="anchor" aria-label="anchor" href="#arg-rfun"></a></dt>
<dd><p>a function to generate random values. Function can return
a numeric/integer vector or matrix, and additional arguments
requred for this function are passed through the argument <code>...</code></p></dd>


<dt id="arg-range">range<a class="anchor" aria-label="anchor" href="#arg-range"></a></dt>
<dd><p>a numeric vector of length two, where the first element
indicates the lower bound and the second the upper bound. When values are
generated outside these two bounds then data are redrawn until the bounded
criteria is met. When the output of <code>rfun</code> is a matrix then this input
can be specified as a matrix with two rows, where each the first row
corresponds to the lower bound and the second row the upper bound for
each generated column in the output</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>additional arguments to be passed to <code>rfun</code></p></dd>


<dt id="arg-redraws">redraws<a class="anchor" aria-label="anchor" href="#arg-redraws"></a></dt>
<dd><p>the maximum number of redraws to take before terminating the
iterative sequence. This is in place as a safety in case the <code>range</code>
is too small given the random number generator, causing too many
consecutive rejections. Default is 100</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>either a numeric vector or matrix, where all values are within the
  desired <code>range</code></p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>In simulations it is often useful to draw numbers from truncated distributions
rather than across the full theoretical range. For instance, sampling parameters
within the range [-4,4] from a normal distribution. The <code>rtruncate</code>
function has been designed to accept any sampling function, where the first
argument is the number of values to sample, and will draw values iteratively
until the number of values within the specified bound are obtained.
In situations where it is unlikely for the bounds to be located
(e.g., sampling from a standard normal distribution where all values are
within [-10,-6]) then the sampling scheme will throw an error if too many
re-sampling executions are required (default will stop if more that 100
calls to <code>rfun</code> are required).</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Chalmers, R. P., &amp; Adkins, M. C.  (2020). Writing Effective and Reliable
  Monte Carlo Simulations with the SimDesign Package.
  <code>The Quantitative Methods for Psychology, 16</code>(4), 248-280.
   <a href="https://doi.org/10.20982/tqmp.16.4.p248" class="external-link">doi:10.20982/tqmp.16.4.p248</a></p>
<p>Sigal, M. J., &amp; Chalmers, R. P. (2016). Play it again: Teaching statistics
  with Monte Carlo simulation. <code>Journal of Statistics Education, 24</code>(3),
  136-156. <a href="https://doi.org/10.1080/10691898.2016.1246953" class="external-link">doi:10.1080/10691898.2016.1246953</a></p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="runSimulation.html">runSimulation</a></code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Phil Chalmers <a href="mailto:rphilip.chalmers@gmail.com">rphilip.chalmers@gmail.com</a></p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># n = 1000 truncated normal vector between [-2,3]</span></span></span>
<span class="r-in"><span><span class="va">vec</span> <span class="op">&lt;-</span> <span class="fu">rtruncate</span><span class="op">(</span><span class="fl">1000</span>, <span class="va">rnorm</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">vec</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Min.  1st Qu.   Median     Mean  3rd Qu.     Max. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -1.99048 -0.53406  0.04363  0.06644  0.67385  2.85335 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># truncated correlated multivariate normal between [-1,4]</span></span></span>
<span class="r-in"><span><span class="va">mat</span> <span class="op">&lt;-</span> <span class="fu">rtruncate</span><span class="op">(</span><span class="fl">1000</span>, <span class="va">rmvnorm</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>,<span class="fl">4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   sigma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mat</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        V1                V2         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Min.   :-0.9998   Min.   :-0.9960  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1st Qu.:-0.2525   1st Qu.:-0.1614  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Median : 0.4880   Median : 0.3145  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Mean   : 0.5777   Mean   : 0.3678  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3rd Qu.: 1.2252   3rd Qu.: 0.8249  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Max.   : 3.8032   Max.   : 3.0367  </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># truncated correlated multivariate normal between [-1,4] for the</span></span></span>
<span class="r-in"><span><span class="co">#  first column and [0,3] for the second column</span></span></span>
<span class="r-in"><span><span class="va">mat</span> <span class="op">&lt;-</span> <span class="fu">rtruncate</span><span class="op">(</span><span class="fl">1000</span>, <span class="va">rmvnorm</span>, <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>,<span class="fl">4</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">3</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   sigma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mat</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        V1                V2           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Min.   :-0.9982   Min.   :0.0005329  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1st Qu.: 0.1540   1st Qu.:0.3214723  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Median : 0.8437   Median :0.7322517  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Mean   : 0.9169   Mean   :0.8272766  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3rd Qu.: 1.6181   3rd Qu.:1.2162638  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Max.   : 3.9698   Max.   :2.8991041  </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># truncated chi-square with df = 4 between [2,6]</span></span></span>
<span class="r-in"><span><span class="va">vec</span> <span class="op">&lt;-</span> <span class="fu">rtruncate</span><span class="op">(</span><span class="fl">1000</span>, <span class="va">rchisq</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">6</span><span class="op">)</span>, df <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">vec</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2.000   2.663   3.482   3.625   4.429   5.999 </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Phil Chalmers.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

