<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Template-based generation of the Generate-Analyse-Summarise functions — SimFunctions • SimDesign</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Template-based generation of the Generate-Analyse-Summarise functions — SimFunctions"><meta name="description" content="This function prints template versions of the required Design and Generate-Analyse-Summarise functions
for SimDesign to run simulations. Templated output comes complete with the correct inputs,
class of outputs, and optional comments to help with the initial definitions.
Use this at the start of your Monte Carlo simulation study. Following
the definition of the SimDesign template file please refer to detailed the information
in runSimulation for how to edit this template to make a working simulation study."><meta property="og:description" content="This function prints template versions of the required Design and Generate-Analyse-Summarise functions
for SimDesign to run simulations. Templated output comes complete with the correct inputs,
class of outputs, and optional comments to help with the initial definitions.
Use this at the start of your Monte Carlo simulation study. Following
the definition of the SimDesign template file please refer to detailed the information
in runSimulation for how to edit this template to make a working simulation study."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SimDesign</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.19.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Catch_errors.html">Managing warning and error messages</a></li>
    <li><a class="dropdown-item" href="../articles/Fixed_obj_fun.html">Exporting objects and functions from the workspace</a></li>
    <li><a class="dropdown-item" href="../articles/HPC-computing.html">Distributing jobs for high-performance computing (HPC) clusters (e.g., via Slurm)</a></li>
    <li><a class="dropdown-item" href="../articles/MultipleAnalyses.html">Multiple analysis functions</a></li>
    <li><a class="dropdown-item" href="../articles/Parallel-computing.html">Parallel computing information</a></li>
    <li><a class="dropdown-item" href="../articles/Saving-results.html">Saving simulation results and state</a></li>
    <li><a class="dropdown-item" href="../articles/SimDesign-intro.html">Introduction to the SimDesign package</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/philchalmers/SimDesign/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Template-based generation of the Generate-Analyse-Summarise functions</h1>
      <small class="dont-index">Source: <a href="https://github.com/philchalmers/SimDesign/blob/main/R/SimFunctions.R" class="external-link"><code>R/SimFunctions.R</code></a></small>
      <div class="d-none name"><code>SimFunctions.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function prints template versions of the required <code>Design</code> and Generate-Analyse-Summarise functions
for <code>SimDesign</code> to run simulations. Templated output comes complete with the correct inputs,
class of outputs, and optional comments to help with the initial definitions.
Use this at the start of your Monte Carlo simulation study. Following
the definition of the <code>SimDesign</code> template file please refer to detailed the information
in <code><a href="runSimulation.html">runSimulation</a></code> for how to edit this template to make a working simulation study.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">SimFunctions</span><span class="op">(</span></span>
<span>  filename <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  save_structure <span class="op">=</span> <span class="st">"single"</span>,</span>
<span>  extra_file <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  nAnalyses <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  nGenerate <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  summarise <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  comments <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  openFiles <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  spin_header <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  SimSolve <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-filename">filename<a class="anchor" aria-label="anchor" href="#arg-filename"></a></dt>
<dd><p>a character vector indicating whether the output should be saved to two respective files
containing the simulation design and the functional components, respectively. Using this option
is generally the recommended approach when beginning to write a Monte Carlo simulation</p></dd>


<dt id="arg-dir">dir<a class="anchor" aria-label="anchor" href="#arg-dir"></a></dt>
<dd><p>the directory to write the files to. Default is the working directory</p></dd>


<dt id="arg-save-structure">save_structure<a class="anchor" aria-label="anchor" href="#arg-save-structure"></a></dt>
<dd><p>character indicating the number of files to break the simulation code into
when <code>filename</code> is included (default is 'single' for one file). When <code>save_structure = 'double'</code> the
output is saved to two separate files containing the functions and design definitions,
and when <code>save_structure = 'all'</code> the generate, analyse, summarise, and execution code are all saved into
separate files. The purpose of this structure is because multiple structured files
often makes organization and debugging slightly easier for larger Monte Carlo simulations, though, in principle,
all files could be stored in a single R script</p></dd>


<dt id="arg-extra-file">extra_file<a class="anchor" aria-label="anchor" href="#arg-extra-file"></a></dt>
<dd><p>logical; should an extra file be saved containing user-defined functions or objects?
Default is <code>FALSE</code></p></dd>


<dt id="arg-nanalyses">nAnalyses<a class="anchor" aria-label="anchor" href="#arg-nanalyses"></a></dt>
<dd><p>number of analysis functions to create (default is 1). Increasing the value
of this argument when independent analysis are being performed allows function definitions
to be better partitioned and potentially more modular</p></dd>


<dt id="arg-ngenerate">nGenerate<a class="anchor" aria-label="anchor" href="#arg-ngenerate"></a></dt>
<dd><p>number of generate functions to create (default is 1). Increase the value
of this argument when when the data generation functions are very different and should
be isolated from each other (otherwise, if there is much in common between the generate
steps, the default of 1 should be preferred). Otherwise, if <code>nGenerate == 0</code>
then no generate function will be provided and instead this data-generation
step can be defined in the analysis function(s) (only recommended for smaller simulations)</p></dd>


<dt id="arg-summarise">summarise<a class="anchor" aria-label="anchor" href="#arg-summarise"></a></dt>
<dd><p>include <code>summarise</code> function? Default is <code>TRUE</code></p></dd>


<dt id="arg-comments">comments<a class="anchor" aria-label="anchor" href="#arg-comments"></a></dt>
<dd><p>logical; include helpful comments? Default is <code>FALSE</code></p></dd>


<dt id="arg-openfiles">openFiles<a class="anchor" aria-label="anchor" href="#arg-openfiles"></a></dt>
<dd><p>logical; after files have been generated, open them in your text editor
(e.g., if Rstudio is running the scripts will open in a new tab)?</p></dd>


<dt id="arg-spin-header">spin_header<a class="anchor" aria-label="anchor" href="#arg-spin-header"></a></dt>
<dd><p>logical; include a basic <code><a href="https://rdrr.io/pkg/knitr/man/spin.html" class="external-link">knitr::spin</a></code> header to allow the simulation
to be knitted? Default is <code>TRUE</code>. For those less familiar with <code>spin</code> documents
see <code>https://bookdown.org/yihui/rmarkdown-cookbook/spin.html</code> for further details</p></dd>


<dt id="arg-simsolve">SimSolve<a class="anchor" aria-label="anchor" href="#arg-simsolve"></a></dt>
<dd><p>logical; should the template be generated that is intended for a
<code><a href="SimSolve.html">SimSolve</a></code> implementation? Default is <code>FALSE</code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The recommended approach to organizing Monte Carlo simulation files is to first save the template generated
by this function to the hard-drive by passing a suitable <code>filename</code> argument
(which, if users are interacting
with R via the RStudio IDE, will also open the template file after it has been saved).
For larger simulations, two
separate files could also be used (achieved by changing <code>out.files</code>),
and may be easier for debugging/sourcing the simulation code; however, this is a
matter of preference and does not change any functionality in the package.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Chalmers, R. P., &amp; Adkins, M. C.  (2020). Writing Effective and Reliable Monte Carlo Simulations
with the SimDesign Package. <code>The Quantitative Methods for Psychology, 16</code>(4), 248-280.
<a href="https://doi.org/10.20982/tqmp.16.4.p248" class="external-link">doi:10.20982/tqmp.16.4.p248</a></p>
<p>Sigal, M. J., &amp; Chalmers, R. P. (2016). Play it again: Teaching statistics with Monte
Carlo simulation. <code>Journal of Statistics Education, 24</code>(3), 136-156.
<a href="https://doi.org/10.1080/10691898.2016.1246953" class="external-link">doi:10.1080/10691898.2016.1246953</a></p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="runSimulation.html">runSimulation</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Phil Chalmers <a href="mailto:rphilip.chalmers@gmail.com">rphilip.chalmers@gmail.com</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">SimFunctions</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> #-------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> library(SimDesign)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Design &lt;- createDesign(factor1 = NA,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                        factor2 = NA)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> #-------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Generate &lt;- function(condition, fixed_objects) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     dat &lt;- data.frame()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     dat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Analyse &lt;- function(condition, dat, fixed_objects) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     ret &lt;- nc(stat1 = NaN, stat2 = NaN)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     ret</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Summarise &lt;- function(condition, results, fixed_objects) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     ret &lt;- c(bias = NaN, RMSE = NaN)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     ret</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> #-------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> res &lt;- runSimulation(design=Design, replications=2, generate=Generate, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                      analyse=Analyse, summarise=Summarise)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> res</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu">SimFunctions</span><span class="op">(</span>comments <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co">#with helpful comments</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> #-------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> library(SimDesign)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ### Define design conditions</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Design &lt;- createDesign(factor1 = NA,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                        factor2 = NA)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> #-------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ### Define essential simulation functions</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Generate &lt;- function(condition, fixed_objects) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     # Define data generation code ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     # Return a vector, matrix, data.frame, or list</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     dat &lt;- data.frame()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     dat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Analyse &lt;- function(condition, dat, fixed_objects) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     # Run statistical analyses of interest ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     # Return a named vector or list</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     ret &lt;- nc(stat1 = NaN, stat2 = NaN)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     ret</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Summarise &lt;- function(condition, results, fixed_objects) {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     # Summarise the simulation results ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     # Return a named vector of results</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     ret &lt;- c(bias = NaN, RMSE = NaN)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     ret</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> }</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> #-------------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ### Run the simulation</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> res &lt;- runSimulation(design=Design, replications=2, generate=Generate, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                      analyse=Analyse, summarise=Summarise)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> res</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># write output files to a single file with comments</span></span></span>
<span class="r-in"><span><span class="fu">SimFunctions</span><span class="op">(</span><span class="st">'mysim'</span>, comments <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Multiple analysis functions for optional partitioning</span></span></span>
<span class="r-in"><span><span class="fu">SimFunctions</span><span class="op">(</span>nAnalyses <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">SimFunctions</span><span class="op">(</span>nAnalyses <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Multiple analysis + generate functions</span></span></span>
<span class="r-in"><span><span class="fu">SimFunctions</span><span class="op">(</span>nAnalyses <span class="op">=</span> <span class="fl">2</span>, nGenerate<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># save multiple files for the purpose of designing larger simulations</span></span></span>
<span class="r-in"><span><span class="co">#  (also include extra_file for user-defined objects/functions)</span></span></span>
<span class="r-in"><span><span class="fu">SimFunctions</span><span class="op">(</span><span class="st">'myBigSim'</span>, save_structure <span class="op">=</span> <span class="st">'all'</span>,</span></span>
<span class="r-in"><span>   nAnalyses <span class="op">=</span> <span class="fl">3</span>, nGenerate<span class="op">=</span><span class="fl">2</span>, extra_file <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Phil Chalmers.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

